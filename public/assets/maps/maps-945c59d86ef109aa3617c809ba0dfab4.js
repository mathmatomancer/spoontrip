function mapCenter(){navigator.geolocation.getCurrentPosition(getCoords)}function getCoords(t){MapSettings.starting_coordinates=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),MapSettings.map.setCenter(MapSettings.starting_coordinates)}function mapStart(){MapSettings.map=new google.maps.Map(document.getElementById("google-map"),{zoom:14,mapTypeId:google.maps.MapTypeId.ROADMAP}),mapCenter(),drawing_manager=new google.maps.drawing.DrawingManager({drawingMode:google.maps.drawing.OverlayType.POLYLINE,drawingControlOptions:{drawingModes:[google.maps.drawing.OverlayType.POLYLINE]},polylineOptions:{editable:!0}}),google.maps.event.addListener(drawing_manager,"polylinecomplete",function(t){MapSettings.path=t.getPath().getArray(),$("#fetch-data").show()}),drawing_manager.setMap(MapSettings.map),$("#fetch-data").hide()}function getRestaurants(){MapSettings.path.forEach(appendArgument);var t="https://qaus1.dev.spoon/api/v2/spoon_trips?"+MapSettings.argument_string;jQuery.ajax({url:t}).done(function(t){var a=t;a.forEach(function(t){marker=new google.maps.Marker({map:MapSettings.map,position:new google.maps.LatLng(t.lat,t.lon),title:t.title}),MapSettings.markers.push(marker)})})}function appendArgument(t){MapSettings.argument_string=MapSettings.argument_string+"path[]="+t.lat()+","+t.lng()+"&"}console.log("loaded map js file");var MapSettings={map:null,starting_coordinates:null,path:[],argument_string:"",markers:[]};$(document).on("click","#fetch-data",getRestaurants);